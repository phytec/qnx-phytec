begin khronos

  begin egl display 1
    egl-dlls = libEGL_viv.so
    glesv1-dlls = libGLES_CM_viv.so
    glesv2-dlls = libGLESv2_viv.so
    vg-dlls = libOpenVG_viv.so
    glesv2-sc-dlls = libGLSLC.so
    cl-dlls = libOpenCL.so
    gpu-dlls = libGalcore.so
  end egl display

  begin wfd device 1
   # Choose ONE wfd-dlls line that matches your hardware.
   # With a PEB-LVDS-01 LVDS-to-HDMI converter:
   # wfd-dlls = libwfdcfg-tda19988-hdmi-mx8.so libWFDimx8dpu.so
   # With an LVDS-connected LCD panel:
   wfd-dlls = libWFDimx8dpu.so

# Display output setting.
# The DPU can provide output for up to two displays.
# Use these options to enable/disable selected ports.
# Only enabled output ports can be used by the Screen graphic subsystem.
# When using a mode with LVDS dual channel/split mode enabled, the WFD port 2 must be disabled.

# Possible values for port configuration:
#        disabled   .. port disabled
#        mipi       .. port enabled/MIPI mode (valid only for DPU0/MIPI0/LVDS0 and DPU0/MIPI1/LVDS1 ports)
#        lvds       .. port enabled/LVDS mode (valid only for DPU0/MIPI0/LVDS0 and DPU0/MIPI1/LVDS1 ports)
#        rgb        .. port enabled/parallel rgb mode (valid only for LCDIF port and DPU0/MIPI1/LVDS1 port)
# NOTE: Use port1/port 2 in mipi mode to connect IMX-DSI-OLED1 panel.
# wide-display option must be enabled if wide video mode (width > 2880) is selected for the port (wide modes are supported only by LVDS/MIPI ports).
# Possible values for wide-display option:
#        true        port will be configured in pipeline side by side mode (required for wide modes)
#        false       port will be configured in single pipeline mode (must be used for normal modes)

# WFD port 1 - DPU0/MIPI0/LVDS0
  wfd-port-dpu0-mipi0 = lvds
  wfd-port-dpu0-mipi0-wide-display = false
# WFD port 2 - DPU0/MIPI1/LVDS1
  wfd-port-dpu0-mipi1 = lvds
  wfd-port-dpu0-mipi1-wide-display = false
# WFD port 3 - LCDIF
  wfd-port-lcdif = disabled

# The possible port-pipeline bindings are as follows:
#   port      bindable pipelines
# We place framebuffer on upper pipelines by default (#2, #4).
# If wide video-mode (width > 2880) is selected for the port upper pipelines are used internally and are not available for composition.
# Framebuffer must be moved to the lower pipeline (#1, #3).
# DPU0/MIPI0/LVDS0        1, 2
# DPU0/MIPI1/LVDS1        3, 4
# LCDIF                   5

# Information about the gpu cores of the iMX8QXP chip.
# These values are used by the gpu driver during driver initialization.
  device-base-address = 2147483648
  gpu-physBase        = 2147483648
  gpu-physSize        = 2147483648
  gpu-gpuProfiler     = 0
  gpu-irq-3D          = 96
  gpu-reg-base-3D     = 1393557504
  gpu-reg-size-3D     = 262144
  hasPL310            = 0

# Enable monitoring GPU h/w status and set report interval.
# The following information is reported at given interval (in seconds)
# irq count
# message count (at kernel side)
# h/w status registers
   # gpu-heartbeat-interval = 10

# GPU driver contiguous memory pool sizes in MB
# Large values have better performance but longer startup time.
# Small values have a variety of performance impacts at run time.
   # gpu-contiguousMB   = 238   # maximum (254 - internalPoolMB)
   gpu-contiguousMB   = 64      # recommended
   # gpu-contiguousMB   = 2     # minimum

# Other memory pools (no need to change these)
   gpu-internalPoolMB = 16
   gpu-sharedPoolMB   = 2

# Use only the contiguous memory pool (for debugging).
# true means no virtual memory allocations.
# false means that additional virtual memory will be allocated when
# the contiguous pool is full.
  gpu-contiguousOnly = false

# Abort when GPU contiguous memory exhausted instead of allocating
# additional virtual memory (for debugging).  Default is off.
# DO NOT ENABLE THIS.
  # gpu-contiguousAbort = true

# Report GPU contiguous memory usage statistics (current and minimum
# free space) to slog every N seconds.  A value of 0 disables this feature.
# Also logs when a new minimum level of free space is reached.  Default 0.
  # gpu-slogUsageInterval = 10

# GPU power management:  If enabled, the GPU will control GPU power
# at the PMU according to GPU load.  If disabled, the driver will
# assume GPU power is already on, and will fail if it is not (e.g.
# because u-boot disabled GPU at startup).  Default false.
   gpu-pm-enable = true

# Limit power management to "power on" only.  The GPU driver will
# complete the GPU power-on sequence, but will not power off.
# If the VPU is in use this option must be enabled because the
# GPU and VPU share a power supply.  Default false.
   gpu-pm-force-power-on = true

# GPU power management:  If enabled (1), the GPU will control GPU power
# states internal to the GPU core according to GPU load.  Default 0.
# Cannot be enabled when using GPU profiling.
   gpu-powerManagement = 0

# Options to control what debug build of driver writes to slog
   debug-alloc = 0      # Logs memory allocations
   debug-buffer = 0     # Logs first 8 words of each buffer
   debug-cscgamma = 0   # Logs CSC/Gamma correction activity
   debug-dpu = 0        # Logs DPU activity (except pipeline and port)
   debug-isr = 0        # Logs IRQ statistics
   debug-lvds = 0       # Logs LVDS and LDB setup
   debug-mipi = 0       # Logs MIPI  setup
   debug-pipeline = 0   # Logs pipeline activity
   debug-port = 0       # Logs port activity
   debug-register = 0   # Logs register activity to tracelog (not slog!)
   debug-trace = 0      # Logs entry into each WFD function
   debug-misc = 0       # Logs everything else

  end wfd device

end khronos

begin winmgr
  begin globals
    blit-config = nxp-g2d
    blits-logsize = 4096
  end globals

  begin display 1
    # If using the PEB-LVDS-01 LVDS-to-HDMI converter:
    # The tda19988 library returns a list of modes supported by the attached
    # HDMI monitor.  If you want to force a particular mode, specify it here.
    # Otherwise, the first mode returned by the library is used.
    # video-mode = 1024 x 768 @ 60

    # If using an LCD display like the LCD-018, specify its resolution here
    video-mode = 800 x 480 @ 60
  end display

  begin display 2
    # LCD-018
    video-mode = 800 x 480 @ 60
  end display

  # For display #1
  begin class framebuffer-1
    display = 1
    # For wide videomode (width > 2880) FB must be moved to pipe  #1
    pipeline = 2
    format = rgba8888
    usage = nxp-g2d
  end class

  # For display #2
  begin class framebuffer-2
    display = 2
    # For wide videomode (width > 2880) FB must be moved to pipe  #3
    pipeline = 4
    format = rgba8888
    usage = nxp-g2d
  end class

end winmgr
